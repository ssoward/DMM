<!-- APP SCRIPT -->
<div class="list-group-item">
    <h5 class="pull-right">Daily Sales</h5>
    <br />
    <spinner class="bl-spinner-large" ng-show="!pageLoaded"></spinner>
    <div ng-show="pageLoaded">
        <div class="row">
            <div class="col-md-3">
                <form name="reportForm">
                    <p class="input-group">
                        <input required type="text" class="form-control" datepicker-popup="{{format}}" ng-model="dateToEval" is-open="opened"
                               min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" />
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                </span>
                    </p>
                    <p class="input-group">
                        <select required class="form-control" ng-model="location">
                            <option value="Murray">Murray</option>
                            <option value="LEHI">Lehi</option>
                        </select>
                    </p>
                    <ul class="list-inline">
                        <li>
                            <dmm-radio required="true" ng-model="page.sortOrder" ng-value="'products'" group-name="sortOrder" name="products">Group by Products</dmm-radio>
                        </li>
                        <li>
                            <dmm-radio required="true" ng-model="page.sortOrder" ng-value="'invoices'" group-name="sortOrder" name="invoices">Group by Invoices</dmm-radio>
                        </li>
                    </ul>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <button ng-disabled="!reportForm.$valid" class="btn btn-default" ng-click="getReport()">Get Report <span ng-show="page.searchingInvoices"><spinner></spinner></span></button>
            </div>
            <div class="col-md-3">
                <div class="progress" ng-if="page.searchingInvoices">
                    <div class="progress-bar" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width:{{progressComplete}}%">
                        <span class="sr-only">{{progressComplete}} Complete</span>
                    </div>
                </div>
            </div>
        </div>
        <br/>
        <div>Showing Results for: <em>{{dateToEval | date:'fullDate' }}</em></div>

        <!--//sort by products-->
        <div ng-show="!page.searchingInvoices && page.sortOrder === 'products'">
            <table class="table table-striped table-bordered table-hover table-responsive">
                <tr>
                    <th>Product</th>
                    <th class="col-sm-1">HB</th>
                    <th class="col-sm-1">In Stock</th>
                    <th class="col-sm-1">Move</th>
                </tr>
                <tr ng-repeat="prod in productList">
                    <td>
                        <product-sold product="prod" history="productHistory[prod.productNum]" location="location"></product-sold>
                    </td>
                    <td class="col-sm-1">{{holdBin[prod.productNum]?holdBin[prod.productNum]:0}}</td>
                    <td>
                        <span ng-if="inventory[prod.productNum]">
                               <div>Murray: {{inventory[prod.productNum].MURRAY}}</div>
                               <div>Lehi: {{inventory[prod.productNum].LEHI}}</div>
                            </span>
                        </span>
                    </td>
                    <td class="col-lg-6">hello world</td>
                </tr>
            </table>
        </div>

        <!--//sort by invoices-->
        <div ng-show="!page.searchingInvoices && page.sortOrder === 'invoices'">
            <table class="table table-striped table-bordered table-hover table-responsive">
                <tr>
                    <th>Invoice#</th>
                    <th>Invoice#</th>
                    <th>Time</th>
                    <th>Product</th>
                </tr>
                <tr ng-repeat="inv in invoices">
                    <td>{{inv.invoiceNum}}</td>
                    <td>{{inv.invoiceDate | date:'fullDate'}}</td>
                    <td class="col-sm-2">
                        <div ng-repeat="trans in inv.transList">
                            <product-sold product="trans.prod" history="productHistory[trans.productNum]" location="location"></product-sold>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
